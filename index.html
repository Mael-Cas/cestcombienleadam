<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <title>Graphique de bourse</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">


</head>
<body>
<div style="display: flex; justify-content: center; align-items: center; font-family:'Luckiest Guy', cursive; font-weight: 400; font-style: normal;">
    <h1>C'est combien le Adam ?</h1>
</div>

<div style="position: absolute; top: 50%; left: 50%;transform: translate(-50%, -50%); background-color: #f0f0f0; padding: 20px; width: 80%; height: 80%; border-radius: 25% 10%; margin-top: 50px;">
    <div style="width: 80%; height: 80%; position: absolute; top: 50%; left: 50%;transform: translate(-50%, -50%);">
        <canvas id="myChart"></canvas>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>


    async function fetchdata() {
        const ctx = document.getElementById('myChart');
        const response = await fetch('/graph-data');
        const data = await response.json();
        let pointImage= new Image(50,65.3);
        pointImage.src = "adam_head.ico";



        new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.map(row => row.timestamp),

                datasets: [{
                    label: 'Valeur du Adam (en euros)',
                    data: data.map(row => row.value),
                    borderColor: 'rgba(58,123,213,1)', // Couleur vive
                    borderWidth: 1, // Ã‰paisseur de la ligne
                    radius: 3,
                    fill: true,
                    tension: 0.3,
                    usePointStyle: true,
                    pointStyle: pointImage,
                }]


            },
            options: {

                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }
    fetchdata();

</script>
</body>
</html>
